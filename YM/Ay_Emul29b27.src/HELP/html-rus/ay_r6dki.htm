<!doctype html><HTML><HEAD><META HTTP-EQUIV="Content-Type" Content="text/html; charset=Windows-1251"><LINK REL="stylesheet" TYPE="text/css" HREF="Ay_Emul.css"></HEAD><BODY>

<H1><A NAME="mixer"></A>Окно "Микшер"</H1>

<P>Горячая клавиша – <B>G</B>. Окно "Микшер" предоставляет Вам полный контроль над процессом синтеза звука AY/YM. Настройки влияют не только на проигрывание, но и на генерацию WAV-файлов. Ниже приведено описание основных элементов окна. Если не оговорено особо, то соответствующую настройку можно изменять в процессе проигрывания. Если поставить галочку "Брать из списка", то соответствующая настройка будет браться из настроек "Списка проигрывания", конечно, если она там определена (вручную или автоматически из заголовка файла).</P>

<P><B><I>Вкладка AY Emulation.</I></B></P>

<P><B>Усиление каналов. </B>Для каждого из каналов микросхемы (A, B и C) можно задать коэффициент усиления в левом и правом канале усилителя. Значения можно задавать непосредственным вводам числа (в диапазоне 0–255, что соответствует k = 0.0–1.0), перемещением соответствующего движка, либо выбором стандартного шаблона в ниспадающем списке. В серых полях отображаются значения, которые используются в данный момент (если идёт проигрывание). Значение коэффициента усиления для “бипера” задается аналогично, правда, пока в этой версии оно не связано с коэффициентами усиления каналов микросхемы. Регулятор <I>Preamp</I> позволяет задать общий коэффициент усиления для микросхемы и ”бипера”.</P>

<P><B>Оптимизация.</B> Выбирает алгоритм эмуляции. При оптимизации <I>по скорости</I> алгоритм работает быстрее, так как вычисления происходят на частоте сэмплов, однако, это заметно снижает качество эмуляции. При оптимизации <I>по качеству</I> качество звука ближе к оригиналу, поскольку вычисления производятся на частоте счетчиков микросхемы. При этом при ресэмплировании на конечную частоту сэмплов можно дополнительно включить низкочастотный FIR-фильтр. С помощью вертикального регулятора можно установить качество фильтра: чем больше число, тем качественнее фильтр, но тем больше загружен процессор. Оптимальным можно считать фильтр с шириной не менее 32, которой достаточно для подавления частот выше 20 кГц при частоте сэмплов 44100 Гц и частоте AY 1773400 Гц.</P>

<P><B>Частота микросхемы.</B> Задаёт частоту внешних часов, от которых синхронизируется микросхема. Можно выбрать одно из стандартных значений, либо вписать свое. В сером поле отображается текущее значение.</P>

<P><B>Тип микросхемы. </B>Можно выбрать тип эмулируемой микросхемы. В серых полях отмечается микросхема, эмулируемая в данный момент.</P>

<P><B>Частота прерываний. </B>Задаёт частоту обновления регистров микросхемы c точностью до одной тысячной Герца. Не актуальна для музыки, не синхронизированной с частотой прерываний (OUT, ZXAY, EPSG), а также для AY и AYM, в которых используется понятие <I>TStates per frame</I>.</P>

<P><B>OUT, ZXAY, AY, AYM. </B>Параметр <I>TStates per frame</I> определяет расстояние в тактах Z80 между соседними прерываниями. Этот параметр, совместно с <I>Частотой Z80,</I> используется при эмуляции Z80 (проигрывание AY и AYM-файлов), а также совместно с параметром <I>Смещение прерывания</I> используется при конвертировании из ОUT и ZXAY. Если файлы OUT созданы в эмуляторе "Z80" G.A. Lunter'а, то значение этого параметра должно быть 69888 тактов, что соответствует частоте прерываний 50 Гц. <I>Смещение прерывания</I> используется при конвертировании из OUT и ZXAY файлов в PSG, VTX или YM6. Процесс конвертирования представляет собой попытку выделить из непрерывного потока вывода на микросхему моменты, в течение которых вывод осуществляется почти одновременно. Параметр <I>Смещение прерывания</I> определяет смещение в тактах Z80 от начала OUT или ZXAY файла до первого такого момента. Этот параметр колеблется в пределах от нуля и выше, но не может превысить значение параметра <I>TStates per frame</I>.</P>

<P><B>Частота Z80.</B> Параметр используется для проигрывания AY, AYM, EPSG, ZXAY и OUT файлов. Если OUT файл создан в эмуляторе "Z80" by G.A. Lunter, то необходимо использовать значение 3494400 Гц. Если EPSG создан в режиме “Пентагон 128” эмулятора “Z80Stealth” – 3500000 Гц.</P>

<P><B>YM5, YM6 (MFP Timer). </B>Частота таймера Atari ST для воспроизведения спецэффектов в YM5 и YM6 файлах. Опция <I>AY/YM x 16/13 </I>привязывает данную частоту к частоте часов музыкального сопроцессора с коэффициентом 16/13. Очень удобно для прослушивания этих файлов на частоте AY/YM, отличной от 2 МГц. Опция <I>Atari ST </I>позволяет установить частоту равной 2457600 Гц (взято из документации по Atari ST). Опция <I>Другая </I>позволяет установить частоту таймера произвольно.</P>

<P><B><I>Вкладка WaveOut.</I></B></P>

<P><B>Частота сэмплов, Разрешение, Каналы </B>– настройки Вашей звуковой карты для вывода цифрового звука. Наилучшие результаты получаются для 16-битного стерео звука при частоте сэмплов равной частоте счетчиков AY (нажмите кнопку «AY / 8» для автоматического вычисления этой частоты). С практической точки зрения, такую высокую частоту можно использовать лишь при конвертировании в WAV для последующей передискретизации на более низкую частоту сэмплов; для прослушивания непосредственно в Ay_Emul рекомендуется выбирать частоту не ниже 44100 Гц. Если выбранная частота сэмплов не поддерживается устройством вывода звука, то при попытке проигрывания появится сообщение об ошибке или качество звучания только ухудшится. За подробностями обращайтесь к документации вашей звуковой карты.</P>

<P><B>Buffers.</B> Позволяет установить длину звукового буфера в ms (<I>Buffer length</I>) и выбрать количество буферов (<I>Number of buffers</I>). Суммарная длина буферов (<I>Total length</I>) определяет задержку на реакцию при изменении параметров на вкладке <B><I>AY Emulation</I></B>. Слишком маленькая длина буферов может привести к нестабильности звучания во время работы других задач Windows.</P>

<P><B>Device.</B> Позволяет выбрать устройство вывода звука. Рекомендуется использовать <I>Wave Mapper</I>.</P>

<P>Параметры вкладки <B><I>WaveOut</I></B> нельзя менять в процессе проигрывания. Чтобы остановить проигрывание, нажмите кнопку <B>Stop playing</B> в нижнем углу вкладки. В данной версии параметр <I>Частота сэмплов</I> также используется для инициализации библиотеки <B><I>BASS.DLL</I></B>, а также при развертке спектра во время визуализации проигрываемого этой библиотекой файла.</P>

<P><B><I>Вкладка MIDIOut.</I></B></P>

<P><B>Device.</B> Позволяет выбрать MIDI-устройство. Изменение данной опции блокируется во время проигрывания.</P>

<P><B>Seek to first “Note On” MIDI-event.</B> Позволяет пропустить паузу в начале MIDI-файлов. Опция очень полезна, так как многие MIDI-файлы в коллекциях, доступных в Интернете, начинают звучать только с второй-третьей секунды, а иногда и с десятой. Опция работает, только если пауза превышает 0,5 секунды, при этом бегунок <B><I>Progress </I></B>перескакивает в позицию за 20 мс до первой ноты MIDI-файла.</P>

<P><B><I>Вкладка Global Volume Control.</I></B></P>

<P><I>В поле Current volume control</I><B> </B>отображается путь к текущему системному регулятору громкости, к которому привязан регулятор громкости на главном окне эмулятора. Выбирается автоматически (например, при нажатии на кнопку <B>Autodetect</B>). Либо вручную нажатием на кнопку <B>Select</B>. В последнем случае в появляющихся окнах необходимо сделать желаемый выбор. Обычно, если у Вас установлена одна дешевая звуковая карта, выбирать не из чего, и результат будет таким же, как и при автоматическом выборе.</P>

<P>Отметьте параметр <I>Save volume position</I>, если хотите, чтобы Ay_Emul запоминал на выходе положение регулятора громкости. В противном случае, эмулятор при старте оставит текущее положение системного регулятора громкости.</P>

<P>Отметив параметр <I>Linear scale (as is)</I>, Вы заставите работать регулятор громкости на главном окне в линейной шкале, то есть изменения в нижней части шкалы будут казаться более грубыми, чем в верхней. Линейная шкала может оказаться полезной, если у Вас дешевая звуковая карта с изначально нелинейным регулятором громкости.</P>

<P><B><I>Вкладка BASS.DLL v2.2.</I></B></P>

<P>В данной версии настройка поддержки типов файлов, проигрываемых библиотекой <B>BASS.DLL</B>, реализована не полностью. Так, частота сэмплов берется с вкладки <B><I>WaveOut</I></B>, а остальные параметры не настраиваются (используются значения по умолчанию). Однако, в виду того, что визуализация занимает много процессорного времени, ее тонкая настройка сделана.</P>

<P>Группа <I>Visualization</I> объединяет три параметра.</P>

<P>Параметр <I>Hanning window. </I>Отключение данной опции несколько размывает отображаемый спектр, но немного разгружает процессор.</P>

<P>Параметр <I>FFT quality </I>определяет насыщенность анализатора спектра в низкочастотной области. Чем выше качество, тем больше процессорного времени необходимо для визуализации спектра. К сожалению, даже в режиме <I>High</I> (2048 точек) диапазон от 20 до 100 Гц представлен очень бедно, но ничего лучшего библиотека <B>BASS.DLL</B> не дает.</P>

<P>Параметр <I>AmpMin/AmpMax</I> определяет крутизну экспоненты при визуализации амплитуд (как каналов, так и спектра). Конечно, каждый человек слышит звук по-своему и в каждой точке спектра различает разное количество уровней громкости. Соответствующая литература говорит о 160–250 уровнях громкости в разных точках диапазона частот. Данный параметр представляет собой обратную среднюю величину этого количества уровней. Значение 0.003 соответствует примерно 300 уровням.</P>

<P>Кнопка <B>Восстановить</B> используется для заполнения всех полей микшера значениями по умолчанию. Используйте её, если с помощью ручных настроек не удаётся добиться благозвучия. Кнопка <B>Закрыть</B> используется для закрытия окна. Для закрытия окна “Микшер” также можно использовать клавиши <B>Esc</B> или <B>Alt+F4</B>.</P>

</BODY>
</HTML>
